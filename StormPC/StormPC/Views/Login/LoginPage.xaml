<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="StormPC.Views.Login.LoginPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="1" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center"
                    Spacing="12"
                    Width="320">
            
            <Image Source="/Assets/StoreLogo.png" 
                   Width="80" 
                   Height="80"
                   Margin="0,0,0,20"/>

            <TextBlock Text="Đăng nhập StormPC"
                       Style="{ThemeResource TitleLargeTextBlockStyle}"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,20"/>

            <TextBox x:Name="UsernameBox"
                     PlaceholderText="Tên đăng nhập"
                     Text="{x:Bind ViewModel.Username, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

            <PasswordBox x:Name="PasswordBox"
                        PlaceholderText="Mật khẩu"
                        Password="{x:Bind ViewModel.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

            <Button Content="Đăng nhập"
                    Style="{ThemeResource AccentButtonStyle}"
                    Command="{x:Bind ViewModel.LoginCommand}"
                    HorizontalAlignment="Stretch"/>

            <Button Content="Đăng nhập với Windows Hello"
                    Command="{x:Bind ViewModel.LoginWithWindowsHelloCommand}"
                    HorizontalAlignment="Stretch"
                    Visibility="{x:Bind ViewModel.IsWindowsHelloAvailable, Mode=OneWay}"/>

            <HyperlinkButton Content="Khôi phục bằng backup key"
                            Command="{x:Bind ViewModel.RecoverWithBackupKeyCommand}"
                            HorizontalAlignment="Center"/>

            <ProgressRing IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
                         Width="20" 
                         Height="20"/>

            <TextBlock Text="{x:Bind ViewModel.ErrorMessage, Mode=OneWay}"
                       Foreground="Red"
                       TextWrapping="Wrap"
                       HorizontalAlignment="Center"/>
        </StackPanel>
    </Grid>
</Page>