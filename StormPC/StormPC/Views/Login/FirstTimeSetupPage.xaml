<Page
    x:Class="StormPC.Views.Login.FirstTimeSetupPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="1" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center"
                    Spacing="12"
                    Width="320">
            
            <Image Source="/Assets/StoreLogo.png" 
                   Width="80" 
                   Height="80"
                   Margin="0,0,0,20"/>

            <TextBlock Text="Thiết lập tài khoản admin"
                       Style="{ThemeResource TitleLargeTextBlockStyle}"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,20"/>

            <TextBox x:Name="UsernameBox"
                     PlaceholderText="Tên đăng nhập"
                     Text="{x:Bind ViewModel.Username, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

            <PasswordBox x:Name="PasswordBox"
                        PlaceholderText="Mật khẩu"
                        Password="{x:Bind ViewModel.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

            <PasswordBox x:Name="ConfirmPasswordBox"
                        PlaceholderText="Xác nhận mật khẩu"
                        Password="{x:Bind ViewModel.ConfirmPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

            <CheckBox Content="Sử dụng Windows Hello"
                      IsChecked="{x:Bind ViewModel.UseWindowsHello, Mode=TwoWay}"
                      Visibility="{x:Bind ViewModel.IsWindowsHelloAvailable, Mode=OneWay}"/>

            <Button Content="Thiết lập"
                    Style="{ThemeResource AccentButtonStyle}"
                    Command="{x:Bind ViewModel.SetupCommand}"
                    HorizontalAlignment="Stretch"/>

            <ProgressRing IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
                         Width="20" 
                         Height="20"/>

            <TextBlock Text="{x:Bind ViewModel.ErrorMessage, Mode=OneWay}"
                       Foreground="Red"
                       TextWrapping="Wrap"
                       HorizontalAlignment="Center"/>
        </StackPanel>
    </Grid>
</Page>